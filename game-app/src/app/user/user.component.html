<div *ngIf="isFriend !== undefined">
	<div *ngIf="userInfo$ | async; let userInfo">

		{{userInfo.username}}

		<div *ngIf="!isFriend && !hasRequest">
			<button class="btn btn-outline-primary"
				(click)="userLoggedService.sendRequest(userid,authService.currentUserName,authService.currentUserId); hasRequest=true">Aggiungi Amico
			</button>
		</div>
		
		<div *ngIf="isFriend">
			<button class="btn btn-outline-primary" (click)="userLoggedService.removeFriend(userid,authService.currentUserId);">Rimuovi Amico
			</button>
		</div>

		<div *ngIf="hasRequest">
			<button mat-button class="btn btn-outline-primary" disabled>Richiesta d'amicizia inviata
			</button>
		</div>

	</div>

	<div class="btn-group">
		<button class="btn btn-outline-primary" (click)="UpdateList(userlists[0].code);">Completed Games</button>
		<button class="btn btn-outline-primary" (click)="UpdateList(userlists[1].code);">Playing Games</button>
		<button class="btn btn-outline-primary" (click)="UpdateList(userlists[2].code);">Desired Games</button>
	</div>

	<div *ngIf="gameList$ | async; let list">
		<div *ngFor="let u of list">
			<a [routerLink]="['/games', u.payload.doc.id]">
				{{ util.capitalize(u.payload.doc.data().title) }}
			</a>
			<p *ngIf="viewlist===userlists[0].code">
				Tempo di completamento: {{u.payload.doc.data().completetime}}
			</p>
		</div>
		<br>
		<div *ngIf="(viewlist === userlists[0].code && (myGameList$ | async)); let mylist">
			Giochi totali: {{list.length}}
			Giochi totali miei: {{mylist.length}} <br>

			Media di Completamento: {{util.avgTime(list)}}
			Media di Completamento mia: {{util.avgTime(mylist)}} <br>

			Somma spese mie: {{mySpese.sumPrice}}
			Media spese mie: {{mySpese.avgPrice}}
			Numero giochi acquistati miei: {{mySpese.countBoughtGame}}

			Somma spese utente: {{userSpese.sumPrice}}
			Media spese utente: {{userSpese.avgPrice}}
			Numero giochi acquistati utente: {{userSpese.countBoughtGame}}

		</div>

	</div>



	<button *ngIf="!isCommonGames" class="btn btn-outline-primary" (click)="isCommonGames = true; CommonGames(); ">Giochi Comuni</button>

	<div *ngIf="isCommonGames && common$; let common">
		<p>Giochi Comuni</p>
		<div id= cards *ngFor="let u of common">
			<mat-card id="my">
				<mat-card-title> {{ util.capitalize(u.title) }} </mat-card-title>
				<mat-card-content>
				Tempo di completamento mio: {{u.mytime }}<br>				
				Spese del gioco mie: {{u.myprice }}
				Lista : {{u.mylist}}
			
			</mat-card-content>
			</mat-card>

			<mat-card id="friend">
				<mat-card-title> {{ util.capitalize(u.title) }} </mat-card-title>
				<mat-card-content>
				Tempo di completamento: {{u.usertime }}<br>				
				Spese del gioco: {{u.userprice }}
				Lista : {{u.friendlist}}
				
				</mat-card-content>
			</mat-card>

		</div>

	</div>