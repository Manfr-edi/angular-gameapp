<div *ngIf="isFriend !== undefined">
	<div *ngIf="userInfo$ | async; let userInfo">

		{{userInfo.username}}

		<div *ngIf="!isFriend">
			<button class="btn btn-outline-primary"
				(click)="userLoggedService.addFriend(userid,userInfo.username);">Aggiungi Amico
			</button>
		</div>

		<div *ngIf="isFriend">
			<button class="btn btn-outline-primary" (click)="userLoggedService.removeFriend(userid);">Rimuovi Amico
			</button>
		</div>

	</div>

	<div class="btn-group">
		<button class="btn btn-outline-primary" (click)="UpdateList(userlists[0].code);">Completed Games</button>
		<button class="btn btn-outline-primary" (click)="UpdateList(userlists[1].code);">Playing Games</button>
		<button class="btn btn-outline-primary" (click)="UpdateList(userlists[2].code);">Desired Games</button>
	</div>

	<div *ngIf="gameList$ | async; let list">
		<div *ngFor="let u of list">
			<a [routerLink]="['/games', u.payload.doc.id]">
				{{ util.capitalize(u.payload.doc.data().title) }}
			</a>
			<p *ngIf="viewlist===userlists[0].code">
				Tempo di completamento: {{u.payload.doc.data().completetime}}
			</p>
		</div>
		<br>
		<div *ngIf="(viewlist === userlists[0].code && (myGameList$ | async)); let mylist">
			Giochi totali: {{list.length}}
			Giochi totali miei: {{mylist.length}} <br>

			Media di Completamento: {{util.avgTime(list)}}
			Media di Completamento mia: {{util.avgTime(mylist)}} <br>

			Somma spese mie: {{mySpese.sumPrice}}
			Media spese mie: {{mySpese.avgPrice}}
			Numero giochi acquistati miei: {{mySpese.countBoughtGame}}

			Somma spese utente: {{userSpese.sumPrice}}
			Media spese utente: {{userSpese.avgPrice}}
			Numero giochi acquistati utente: {{userSpese.countBoughtGame}}
		</div>

		<!--
		<a *ngIf="myGameList$ | async; let mylist">
			<a *ngIf="viewlist === userlists[0].code">
			</a>
		</a>
	-->

	</div>



	<button *ngIf="!isCommonGames" class="btn btn-outline-primary" (click)="isCommonGames = true; CommonGames(); ">Giochi Comuni</button>

	<div *ngIf="isCommonGames && common$; let common">
		<p>Giochi Comuni</p>
		<div *ngFor="let u of common">
			<a>
				Titolo: {{ util.capitalize(u.title) }}
				Tempo di completamento mio: {{u.mytime }}
				Tempo di completamento: {{u.usertime }}
				Spese del gioco mie: {{u.myprice }}
				Spese del gioco: {{u.userprice }}
			</a>

		</div>

	</div>